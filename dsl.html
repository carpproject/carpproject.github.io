<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>PENCIL as a target for Domain Specific Languages</title>
   <style type="text/css">
div.content
{
  margin: 0px auto;
  width: 700px;
}
   </style>
</head>
<body>
<div class="content">

<h1>Introduction</h1>
The Platform-Neutral Compute Intermediate Language, or PENCIL, is a C99-based language developed as part of the <a href="http://carpproject.eu">CARP Project</a>.
A key goal of the language is to serve as an intermediate language for the compilation of domain-specific languages.
The PENCIL representation can then be compiled into efficient, device-specific OpenCL code using a PENCIL-to-OpenCL compiler such as <a href="http://repo.or.cz/w/ppcg.git">PPCG</a>.
This eliminates the need for the DSL implementer to develop different platform-specific backends: all that is needed to target different platforms is a PENCIL backend!

<h1>The PENCIL Scala library</h1>
The <a href="http://github.com/carpproject/pencil">PENCIL</a> repository
contains a Scala library that can be used to implement a PENCIL backend for a DSL compiler.
The library provides the following:
<ul>
    <li>An in-memory representation of the PENCIL as a set of Scala
    classes.</li>
    <li>Validation functions for the in-memory PENCIL representation.</li>
    <li>A printer to obtain PENCIL code from the in-memory representation.</li>
</ul>

This library significantly simplifies the development process of targeting a DSL to PENCIL,
by providing an API for building, manipulating, and printing the PENCIL intermediate representation.

<h2>Using the PENCIL Scala library</h2>
<ul>
    <li>Downloading and building the library:
    <ul>
        <li>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">git clone git@github.com:carpproject/pencil.git</pre></div>
         </li>
         <li>Build the library following the instructions in the README.txt file</li>
     </ul>
     </li>
     <li>
     To use the library, add the <b>pencil.jar</b> file to your <b>CLASSPATH</b>:
     <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #007020">export </span><span style="color: #996633">CLASSPATH</span><span style="color: #333333">=</span><span style="color: #996633">$CLASSPATH</span>:<span style="color: #008800; font-weight: bold">${</span><span style="color: #996633">PENCIL_CLONE</span><span style="color: #008800; font-weight: bold">}</span>/pencil.jar
</pre></div></li>
<li>
There is an example demonstrating the PENCIL library usage:
<a href="http://github.com/carpproject/pencil/tree/master/example/">github</a><p>
This example can also be found in the <b>example</b> directory in the PENCIL library repository.
</li>

</ul>

<h1>Useful links</h1>
<ul>
    <li>VOBLA: a DSL for linear algebra targeting PENCIL:
    <a href="http://github.com/carpproject/vobla">github</a></li>
    <li>PENCIL IR internal documentation:
    <a href="pencil/index.html">doxygen</a></li>
    <li>PENCIL to CUDA/OpenCL compiler:
    <a href="http://repo.or.cz/w/ppcg.git">PPCG</a></li>
</ul>
</div>
</body>
</html>
